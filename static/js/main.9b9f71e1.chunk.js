(this["webpackJsonpresin-bleker-final"]=this["webpackJsonpresin-bleker-final"]||[]).push([[0],{45:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(34),s=c.n(a),i=c(14),o=c(9),j=c(12),l=c(3),b=function(e){var t=e.stock,c=void 0===t?0:t,r=e.initial,a=void 0===r?0:r,s=e.onAdd,i=Object(n.useState)(0),o=Object(j.a)(i,2),b=o[0],u=o[1];Object(n.useEffect)((function(){u(a)}),[]);return Object(l.jsxs)("section",{className:"btn-group-vertical item-count",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{onClick:function(){b<c&&u(b+1)},children:"+"}),Object(l.jsx)("span",{className:"fs-3",children:b}),Object(l.jsx)("button",{onClick:function(){b>a&&u(b-1)},children:"-"})]}),c>0?Object(l.jsx)("button",{className:" fs-4 btn-primary",onClick:function(){return s(b)},children:" Agregar al carrito"}):Object(l.jsx)("button",{disabled:!0,className:" fs-4 btn-outline-primary",children:" Agregar al carrito"})]})},u=c(19),d=Object(n.createContext)(),O=function(e){var t=e.children,c=Object(n.useState)([]),r=Object(j.a)(c,2),a=r[0],s=r[1],i=function(e){var t=a.map((function(e){return e.idItem})).indexOf(e);return a[t].costItem*a[t].countItem},o=function(){return a.map((function(e){return i(e.idItem)})).reduce((function(e,t){return e+t}))},b=function(){return.21*o()},O=function(){return.1*o()};return Object(l.jsx)(d.Provider,{value:{cartList:a,addToCart:function(e,t){var c=a.find((function(t){return t.idItem===e.id}));void 0===c?s([].concat(Object(u.a)(a),[{idItem:e.id,imgItem:e.photo,nameItem:e.name,costItem:e.price,countItem:t}])):(c.countItem+=t,s(Object(u.a)(a)))},removeList:function(){return s([])},deleteItem:function(e){var t=a.filter((function(t){return t.idItem!==e}));s(t)},calcTotalPerItem:i,calcSubTotal:o,calcTaxes:b,calcTotal:function(){return o()+b()-O()},calcDiscount:O,calcItemsCount:function(){return a.map((function(e){return e.countItem})).reduce((function(e,t){return e+t}),0)}},children:t})},m=function(e){var t=e.item,c=Object(n.useState)(0),r=Object(j.a)(c,2),a=r[0],s=r[1],o=Object(n.useContext)(d);return Object(l.jsx)(l.Fragment,{children:t&&t.photo?Object(l.jsxs)("div",{className:"container-fluid item-detail",children:[Object(l.jsx)("h1",{className:"fs-1",children:t.name}),Object(l.jsx)("img",{src:t.photo,alt:"imagen"}),Object(l.jsxs)("section",{children:[Object(l.jsx)("p",{children:t.description}),Object(l.jsxs)("p",{children:["$ ",t.price]}),Object(l.jsxs)("p",{children:["Stock ",t.stock]}),0===a?Object(l.jsx)(b,{stock:t.stock,initial:a,onAdd:function(e){alert("Llevas "+e+" "+t.name+"/s"),s(e),o.addToCart(t,e)}}):Object(l.jsx)(i.b,{to:"/cart",children:Object(l.jsx)("button",{children:"Ir al carrito"})})]})]}):Object(l.jsx)("div",{className:"spinner-border ",role:"status",children:Object(l.jsx)("span",{className:"visually-hidden"})})})},h=c(0),x=c.n(h),f=c(32),p=c(4),v=c(21),g=c(18),I=c(35),k=Object(I.a)({apiKey:"AIzaSyC9gc5GDEZk1hmF4IwI9wk8j8u7_e48NGU",authDomain:"resin-bleker-final.firebaseapp.com",projectId:"resin-bleker-final",storageBucket:"resin-bleker-final.appspot.com",messagingSenderId:"999499653535",appId:"1:999499653535:web:0cf170de4039b115265daa"}),N=Object(g.d)(k),y=function(){var e=Object(p.a)(x.a.mark((function e(t){var c,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t?Object(v.h)(Object(v.a)(N,"data"),Object(v.l)("categoryId","==",t)):Object(v.h)(Object(v.a)(N,"data"),Object(v.g)("type")),e.next=3,Object(v.d)(c);case 3:return n=e.sent,r=n.docs.map((function(e){return Object(f.a)({id:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=y,S=function(){var e=Object(p.a)(x.a.mark((function e(t){var c,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(g.b)(N,"data",t),e.next=3,Object(g.c)(c);case 3:if(!(n=e.sent).exists()){e.next=8;break}return e.abrupt("return",Object(f.a)({id:t},n.data()));case 8:console.log("Not Found");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(n.useState)({}),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(o.g)().idItem;return Object(n.useEffect)((function(){S(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsx)(m,{item:c})},L=function(e){var t=e.id,c=e.name,n=e.price,r=e.photo,a=e.stock;return Object(l.jsxs)("article",{children:[Object(l.jsxs)(i.b,{to:"/item/".concat(t),children:["  ",Object(l.jsx)("img",{src:r,className:"img",alt:"imagen",title:"Detalles de ".concat(c)})]}),Object(l.jsx)("h3",{children:c}),Object(l.jsxs)("h5",{children:["$ ",n]}),Object(l.jsxs)("p",{children:["Stock ",Object(l.jsx)("b",{children:a})]})]})},T=function(e){var t=e.items;return Object(l.jsx)("div",{className:"container-fluid item-list-container",children:t.length>0?t.map((function(e){return Object(l.jsx)(L,{id:e.id,name:e.name,price:e.price,photo:e.photo,stock:e.stock},e.id)})):Object(l.jsx)("div",{className:"spinner-border container-fluid",role:"status",children:Object(l.jsx)("span",{className:"visually-hidden"})})})},A=Object(n.memo)(T),D=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(o.g)().idCategory;return Object(n.useEffect)((function(){C(a).then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[a]),Object(n.useEffect)((function(){return function(){r([])}}),[]),Object(l.jsx)("main",{className:"container-fluid",children:Object(l.jsx)(A,{items:c})})},$=c(36),E=function(){var e=Object(n.useContext)(d).calcItemsCount();return Object(l.jsxs)(i.b,{to:"/cart",children:[" ",Object(l.jsxs)("div",{className:"cart nav-link active",children:[Object(l.jsx)($.a,{className:" fs-1 "}),e>0&&Object(l.jsx)("span",{className:"rounded-pill d-inline p-2 bg-primary text-white",children:e})]})]})};var F=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],r=t[1];return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(c)},children:[Object(l.jsx)("label",{htmlFor:"keyword",children:Object(l.jsx)("input",{id:"keyword",onKeyDown:function(e){/^[A-Za-z]$/.test(e.key)||(console.log("Prohibido:",e.key),e.preventDefault()),r(e.target.value),console.log(c)},onChange:function(e){return r(e.target.value)}})}),Object(l.jsx)("button",{className:"btn border-primary",children:"Buscar"})]})})},P=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light nav-bar ",children:Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(l.jsx)("img",{src:"https://res.cloudinary.com/dgioqusuk/image/upload/v1638579251/sakuraTitulo_ax4bhl.png",alt:"Sakura Resin",title:"Sakura Resin",width:"200px"})}),Object(l.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(l.jsx)(i.b,{className:"nav-link active",to:"/category/1",children:"Mascotas"}),Object(l.jsx)(i.b,{className:"nav-link active",to:"/category/2",children:"Llaveros"}),Object(l.jsx)(i.b,{className:"nav-link active",to:"/category/3",children:"Articulos"})]}),Object(l.jsx)(F,{}),Object(l.jsx)(E,{})]})})})},B=Object(n.memo)(P),M=(c(44),c(45),function(){var e=Object(n.useContext)(d);return Object(l.jsxs)("section",{className:"container cart-section",children:[Object(l.jsx)("h1",{children:"Lista de compras"}),Object(l.jsx)("div",{children:e.cartList.length>0&&e.cartList.map((function(t){return Object(l.jsxs)("article",{className:"cart-div container-fluid",children:[Object(l.jsx)("img",{src:t.imgItem,alt:"imagen"}),Object(l.jsxs)("h3",{title:"Producto: ".concat(t.nameItem),children:[" ",t.nameItem]}),Object(l.jsxs)("div",{children:[1===t.countItem?Object(l.jsxs)("span",{children:[t.countItem," item"]}):Object(l.jsxs)("span",{children:[t.countItem," items / $ ",t.costItem," each"]}),Object(l.jsxs)("h4",{children:["$ ",e.calcTotalPerItem(t.idItem)]})]}),Object(l.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.deleteItem(t.idItem)},children:"X"})]},t.idItem)}))}),e.cartList.length>0&&Object(l.jsxs)("article",{children:[Object(l.jsx)("h2",{children:"Orden de compra"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Subtotal"}),Object(l.jsxs)("h4",{children:["$ ",e.calcSubTotal()," "]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Impuestos"}),Object(l.jsxs)("h4",{children:["$ ",e.calcTaxes()," "]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Descuentos"}),Object(l.jsxs)("h4",{children:["-$ ",e.calcDiscount()," "]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:Object(l.jsx)("b",{children:"TOTAL"})}),Object(l.jsxs)("h3",{children:["$ ",e.calcTotal()," "]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/",children:Object(l.jsx)("button",{className:"btn btn-primary",children:"Seguir comprando"})}),e.cartList.length>0?Object(l.jsx)("button",{className:"btn btn-danger",onClick:e.removeList,children:"Borrar lista de compras"}):Object(l.jsx)("p",{children:"No hay nada en el carrito"})]}),Object(l.jsx)(i.b,{to:"/",children:Object(l.jsx)("button",{className:"btn btn-success btn-lg",onClick:function(){var t=e.cartList.map((function(e){return{id:e.idItem,title:e.nameItem,price:e.costItem}}));e.cartList.forEach(function(){var e=Object(p.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(g.b)(N,"data",t.idItem),e.next=3,Object(g.h)(c,{stock:Object(g.e)(-t.countItem)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c={buyer:{name:"Maka Albarn",email:"soul.eater@shinbunsen.com",phone:"4242564"},total:e.calcTotal(),items:t,date:Object(g.f)()};console.log(c);var n=function(){var e=Object(p.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(g.b)(Object(g.a)(N,"orders")),e.next=3,Object(g.g)(t,c);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n().then((function(e){return alert("Su compra fue realizada. Orden: ".concat(e.id))})).catch((function(e){return console.log(e)})),e.removeList()},children:Object(l.jsx)("b",{children:"COMPRAR"})})})]})]})});var R=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(O,{children:Object(l.jsxs)(i.a,{children:[Object(l.jsx)(B,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/",element:Object(l.jsx)(D,{})}),Object(l.jsx)(o.a,{path:"/category/:idCategory",element:Object(l.jsx)(D,{})}),Object(l.jsx)(o.a,{path:"/item/:idItem",element:Object(l.jsx)(w,{})}),Object(l.jsx)(o.a,{path:"/cart",element:Object(l.jsx)(M,{})})]})]})})})};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(R,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9b9f71e1.chunk.js.map